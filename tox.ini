[tox]
minversion = 3.15
envlist =
    py{36,37,38,39}-django22
    py{36,37,38,39}-django30
    py{36,37,38,39}-django31
    py{36,37,38,39}-django32
    lint
    dist
skip_missing_interpreters = true

[testenv]
deps =
    django22: Django>=2.2<3.0
    django30: Django>=3.0,<3.1
    django31: Django>=3.1,<3.2
    django32: Django>=3.2,<3.3
    coverage
    pytest
    pytest-cov
    pytest-django
setenv =
    PYTHONDONTWRITEBYTECODE=1
commands =
    pytest --cov=django_admin_logs --cov-append

[testenv:lint]
deps =
    black
    ruff
skip_install = true
commands =
    black --check .
    ruff check --no-cache .

[testenv:dist]
deps =
    build
    twine
skip_install = true
commands =
    python -m build
    python -m twine check dist/*
