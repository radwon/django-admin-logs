[tox]
requires =
    tox>=4
envlist =
    py3{8-12}-django42
    py3{10-14}-django52
    py3{12-14}-django60
    lint
    dist
skip_missing_interpreters = true

[testenv]
deps =
    django42: Django>=4.2,<4.3
    django51: Django>=5.2,<5.3
    django60: Django>=6.0,<6.1
    coverage
    pytest
    pytest-cov
    pytest-django
setenv =
    PYTHONDONTWRITEBYTECODE=1
commands =
    pytest --cov=django_admin_logs --cov-append

[testenv:lint]
deps =
    black
    ruff
skip_install = true
commands =
    black --check .
    ruff check --no-cache .

[testenv:dist]
deps =
    build
    twine
skip_install = true
commands =
    python -m build
    python -m twine check dist/*
